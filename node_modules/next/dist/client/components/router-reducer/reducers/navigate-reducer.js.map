{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/navigate-reducer.ts"],"names":["handleExternalUrl","navigateReducer","state","mutable","url","pendingPush","previousTree","tree","mpaNavigation","canonicalUrl","scrollableSegments","undefined","handleMutable","generateSegmentsFromPatch","flightRouterPatch","segments","segment","parallelRoutes","Object","keys","length","parallelRouteKey","parallelRoute","entries","childSegment","push","action","isExternalUrl","navigateType","cache","forceOptimisticNavigation","pathname","hash","href","createHrefFromUrl","isForCurrentTree","JSON","stringify","toString","prefetchValues","prefetchCache","get","treeAtTimeOfPrefetch","data","flightData","canonicalUrlOverride","readRecordValue","currentTree","currentCache","flightDataPath","flightSegmentPath","slice","treePatch","newTree","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","applied","applyFlightData","hardNavigate","shouldHardNavigate","status","CacheStates","READY","subTreeData","invalidateCacheBelowFlightSegmentPath","subSegment","filter","patchedTree","hashFragment","split","optimisticTree","createOptimisticTree","res","fillCacheWithDataProperty","fetchServerResponse","nextUrl","bailOptimistic","createRecordFromThenable","Error"],"mappings":"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"}