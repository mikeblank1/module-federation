{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/navigate-reducer.ts"],"names":["CacheStates","fetchServerResponse","createRecordFromThenable","readRecordValue","createHrefFromUrl","invalidateCacheBelowFlightSegmentPath","fillCacheWithDataProperty","createOptimisticTree","applyRouterStatePatchToTree","shouldHardNavigate","isNavigatingToNewRootLayout","handleMutable","applyFlightData","handleExternalUrl","state","mutable","url","pendingPush","previousTree","tree","mpaNavigation","canonicalUrl","scrollableSegments","undefined","generateSegmentsFromPatch","flightRouterPatch","segments","segment","parallelRoutes","Object","keys","length","parallelRouteKey","parallelRoute","entries","childSegment","push","navigateReducer","action","isExternalUrl","navigateType","cache","forceOptimisticNavigation","pathname","hash","href","isForCurrentTree","JSON","stringify","toString","prefetchValues","prefetchCache","get","treeAtTimeOfPrefetch","data","flightData","canonicalUrlOverride","currentTree","currentCache","flightDataPath","flightSegmentPath","slice","treePatch","newTree","applied","hardNavigate","status","READY","subTreeData","subSegment","filter","patchedTree","hashFragment","split","optimisticTree","res","nextUrl","bailOptimistic","Error"],"mappings":"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"}