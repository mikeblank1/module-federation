{"version":3,"sources":["../../../src/server/lib/server-ipc.ts"],"names":["createIpcServer","createWorker","filterReqHeaders","invokeRequest","server","ipcServer","require","createServer","req","res","url","URL","method","searchParams","get","args","JSON","parse","Array","isArray","end","stack","deserializeErr","result","errorToJSON","stringify","err","isError","code","console","error","name","message","ipcPort","Promise","resolveIpc","listen","hostname","addr","address","port","serverPort","isNodeDebugging","type","initialEnv","Worker","worker","resolve","numWorkers","maxRetries","forkOptions","env","FORCE_COLOR","NODE_OPTIONS","getNodeOptionsWithoutInspect","replace","trim","__NEXT_PRIVATE_RENDER_WORKER","__NEXT_PRIVATE_ROUTER_IPC_PORT","NODE_ENV","process","execArgv","genExecArgv","undefined","exposedMethods","getStderr","pipe","stderr","getStdout","stdout","forbiddenHeaders","headers","key","value","Object","entries","includes","targetUrl","requestInit","readableBody","parsedUrl","invokeHeaders","invokeRes","resolveInvoke","rejectInvoke","http","invokeReq","request","on"],"mappings":"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"}